<!DOCTYPE html>
<html>
    <head>
      <title>Fruit Ninja</title>
      <link rel="stylesheet" href="style1.css">
        <style>
            canvas{ background: #eee; display: block; margin: 0 auto; }
           
            #para1 {
            text-align: left;
            color: #b204d1;
            }
            
            #para2 {
            text-align: left;
            color: #b204d1;
            }
            
            #para3 {
            text-align: right;
            color: #b204d1;
            padding-right: 30px;
            }
            
            #para4 {
            text-align: center;
            color: #f536a8;
            }
        </style>
    </head>
   
    <body>
      <h1>Fruit Ninja</h1>
      <p id="para4">Tap the fruit before they leave the screen! Watch out: you'll lose a life if you miss one.</p>
      <p id="para1">Difficulty Level:</p> 
      <button onclick="level(2)">easy</button>
      <button onclick="level(1)">medium</button>
      <button onclick="level(2)">hard</button>
      <canvas id="myCanvas" width="700" height="395" onclick="showCoords(event)"></canvas>
      <script>
        
        // To do: make balls reappear after they vanish, make them tappable; set up score, difficulty level, lives, & timer; set up score guide
          
        // setup
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        var balls = [];
        var timer = 0;
        var mouseX;
        var mouseY;
        var scoreCount=0;
        var lifeCount=10;
        let paused = false;
       
        
        
 
        function timeMe(){
          
           if (paused == true) {
           timer +=0;}
           else {timer +=1;}
        }
          
          function showCoords(event) {
              var e = event;
              var x = event.clientX;
              var y = event.clientY;
             // var coords = "X coords: " + x + ", Y coords: " + y;
              var cRect = canvas.getBoundingClientRect();        // Gets CSS pos, and width/height
              var mouseX = Math.round(e.clientX - cRect.left);  // Subtract the 'left' of the canvas 
              var mouseY = Math.round(e.clientY - cRect.top);   // from the X/Y positions to make  
              // var coords2 = "X coords: " + canvasX + ", Y coords: " + canvasY;
              //console.log(coords);
              //console.log(coords2);
              for(var i=0; i < balls.length; i++){
                  if (tap(mouseX, mouseY, balls[i])){
                      score(balls[i]);
                      console.log("score: " + scoreCount);
                      balls[i].tapped = true;
                     
                      
                  }
                  else {tapped = false;}
              }
              
            }
          
       function createBall(){
            var ball = {};
            ball.tapped = false;
            ball.x = Math.floor(Math.random() * 620) + 30;
            ball.y = canvas.height;
            ball.color = Math.floor(Math.random() * 5);
            ball.xmove;
            ball.ymove;
           // console.log("color: " + ball.color);
            return ball;
        }
       
        function level(x){
            for (var i=0; i < x; i++){
                var ball = createBall();
                balls.push(ball);
            }
        }
          
        function moveBall(ball){  // update x and y location of the ball
            var radius;
            if (ball.color == 1) { // apple
                ctx.fillStyle = 'red';
                radius = 27;
                ball.ymove = -0.5;
            } 
            if (ball.color == 2) { // orange
                ctx.fillStyle = 'orange';
                radius = 22;
                ball.ymove = -0.75;
            }
            if (ball.color == 3) { // lemon
                ctx.fillStyle = 'yellow';
                radius = 20;
                ball.ymove = -1;
            }
            if (ball.color == 4) { // watermelon
                ctx.fillStyle = 'green';
                radius = 19;
                ball.ymove = -1.25;
            }
            if (ball.color == 0) { // passionfruit
                ctx.fillStyle = 'purple';
                radius = 15;
                ball.ymove = -1.5;
            }
            
            ball.radius = radius;
            ball.y += ball.ymove;
        }
          
        function drawBalls() {
            
            var ballsD =[];
            for(var i=0; i < balls.length; i++){
                ctx.beginPath();
                var ball = balls[i];
                moveBall(ball);
                
                if (ball.y < 0) {
                    ballsD.push(i);
                    if (ball.tapped == false){
                    lifeCount-=1;
                    console.log("lifeCount: "+lifeCount);}
                   // console.log("ball being deleted");
                } else{
                    if (ball.tapped == true) {
                    ctx.fillStyle = 'black';}
                    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*4);
                    
                    ctx.fill();
                  
                }
                ctx.closePath();
            }
            for (var i=0; i < ballsD.length; i++){
            balls.splice(i,1);
            var ball = createBall();
            balls.push(ball);
            }
        }
          
       
        
        function tap(mouseX, mouseY, ball){
          var asq = (mouseX-ball.x) * (mouseX-ball.x);
          var bsq = (mouseY-ball.y) * (mouseX-ball.y);
          var csq = ball.radius * ball.radius;
          if (asq + bsq <= csq){
              return true;
            //console.log("in bounds");
          } else {return false;}
        }
          
        function score(ball){
            if (ball.tapped == true) {
            scoreCount +=0;}
            else {
            if (ball.color == 1){
            scoreCount+=10; }
            if (ball.color ==2){
            scoreCount+=20;}
            if (ball.color == 3){
            scoreCount +=30;}
            if(ball.color == 4){
            scoreCount+=40;}
            if(ball.color ==5){
            scoreCount+=50;}}
        }
              
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
           
            drawBalls();
           
            
           /*  ctx.fillStyle = 'black';
            ctx.fill();
            ctx.arc(670, 10, 15, 0, Math.PI*4); */
           
            
            ctx.font = "15px Arial";
            ctx.fillStyle = 'black';
            if (timer < 10){
                ctx.fillText("Time: 00:0" + timer, 10, 385);
            }
            else if (timer >= 10 && timer < 60){
                ctx.fillText("Time: 00:" + timer, 10, 385);
            } else if (timer >=60){
                var min = Math.floor(timer/60);
                var sec = timer%60;
                    if (sec < 10) {
                        ctx.fillText("Time: " + min + ":0" + sec, 10, 385);
                    } else if (sec == 0) {ctx.fillText("Time: " + min + ":00" + sec, 10, 385);}
                else {ctx.fillText("Time: " + min + ":" + sec, 10, 385);
                    }
            }
            ctx.fillText("Score: " + scoreCount, 10, 18);
            ctx.fillText("Lives: " + lifeCount, 630, 18);
            if (lifeCount < 0) {
            }
            
            
         }
          
          function pause(){
            paused = true;
          }
          function play(){
            paused = false;
            }
          function restart(){}
          function gameOver(){}
          
        
        console.log("timerstuff");
        if (paused == false) {
            clearTimeout(draw);
            setInterval(draw, 10);
        }
         else if (paused == true) {
        setTimeout(draw);}
        
         setInterval(timeMe, 1000); 

       </script>
      <h2>
      <button onclick="pause">pause</button>
      <button onclick="play">play</button>
      <button onclick="restart()">restart</button>
       <img src="https://www.clipartmax.com/png/middle/221-2216315_ninja-ninja-icon.png" width="10%">
      
      </h2>
     </body>
</html>
